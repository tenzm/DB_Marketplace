{% extends 'homepage.html' %}
{% load static %}
{% block content %}
{% include 'include/header.html' %}




<main class="main__content_wrapper">


    <div class="section product wf-section" bis_skin_checked="1">
        <div class="container-default w-container" bis_skin_checked="1">
            <div class="product-wrapper" bis_skin_checked="1">
                <div data-w-id="04b2ffac-b49e-c82e-a71d-ac156beb467e"
                    style="transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;"
                    class="split-content product-content" bis_skin_checked="1">
                    <div class="breadcrumb-wrapper" bis_skin_checked="1"><a href="/category/ui-kits">{{ current_category.title }}</a>
                    </div>
                    <h1>{{ product.title }}</h1><a href="#"
                        data-wf-sku-bindings="%5B%7B%22from%22%3A%22f_main_image_4dr%22%2C%22to%22%3A%22media%22%7D%5D"
                        class="image-wrapper product-main-image w-inline-block w-lightbox" aria-label="open lightbox"
                        aria-haspopup="dialog"><img
                            src="{{ product.main_product_image.url }}"
                            style="width: 50vw;
                                height: 50vw;
                                object-fit: cover;"
                            data-wf-sku-bindings="%5B%7B%22from%22%3A%22f_main_image_4dr%22%2C%22to%22%3A%22src%22%7D%5D"
                            alt="eCommerce UI Kit"
                            sizes="(max-width: 479px) 93vw, (max-width: 767px) 94vw, (max-width: 991px) 57vw, (max-width: 1439px) 59vw, 733.53125px"
                            class="image product-main-image">
                    </a>
                    <div class="divider product" bis_skin_checked="1"></div>
                    <h2 data-w-id="0d164821-5a69-d93a-4a88-b638db7891d5"
                        style="transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;"
                        class="title about-the-product">О продукте</h2>
                    <div data-w-id="37e0a16d-8990-18f7-7de3-def2c21688c5"
                        style="transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;"
                        class="rich-text about-product w-richtext" bis_skin_checked="1">
                        <p>{{ product.description }}</p>
                        
                    </div>
                    <h2 data-w-id="0d164821-5a69-d93a-4a88-b638db7891d5"
                        style="transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;"
                        class="title about-the-product">Характеристики продукта</h2>
                    <div data-w-id="37e0a16d-8990-18f7-7de3-def2c21688c5"
                        style="transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;"
                        class="rich-text about-product w-richtext" bis_skin_checked="1">
                        <p>{{ product.specs }}</p>
                    </div>

                    <h2 data-w-id="0d164821-5a69-d93a-4a88-b638db7891d5"
                        style="transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;"
                        class="title about-the-product">Отзывы</h2>
                    <div data-w-id="37e0a16d-8990-18f7-7de3-def2c21688c5"
                        style="transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;"
                        class="rich-text about-product w-richtext" bis_skin_checked="1">
                        
                    </div>

                    <div class="reviews__comment--area">
                        {% for comment in product.product_comment.all %}
                        <div class="reviews__comment--list d-flex">
                            <div class="reviews__comment--thumbnail">
                                <img src="{% static 'assets/img/product/avatar.png' %}" style="border-radius: 50px;" alt="comment-thumbnail">
                            </div>
                            <div class="reviews__comment--content">
                                <h4 class="reviews__comment--content__title">{{ comment.user }}</h4>
                                
                                <p class="reviews__comment--content__desc">{{ comment.message }}</p>
                                <span class="reviews__comment--content__date">{{ comment.created }}</span>
                            </div>
                        </div>
                        {% endfor %}
                        {% if user.is_authenticated %}
                        <div class="card-footer p-0 d-flex">
                            <form method="POST" class="self-form" style="width: 100%;">
                                <!-- Security token -->
                                {% csrf_token %}
                                <input type="hidden" name="product_id" value="{{ product.slug }}">
                                
                          
                                <!-- Using the formset -->
                                <ul style="padding: 0; margin: 0; width: 100%;">
                                  <li class="input_original">
                                    <p>Введите отзыв:</p>
                                    <textarea type="textarea" name="comment_message" 
                                    placeholder="Оставьте комментарии..."
                                    style="width: 100%; height: 200px;"></textarea>
                                  </li>
                                </ul>
                          
                                <input type="submit" name="comment" class="submit-button" style="width: 100%;" value="Оправить" />
                              </form>
                        </div>
                        {% else %}
                        <div class="card-footer p-0 d-flex">
                            <h4>Зарегистрируйтесь чтобы оставлять комментарии</h4>
                        </div>
                        {% endif %}
                    </div>


                </div>
                <div class="sidebar-product" bis_skin_checked="1">
                    <div data-w-id="87fc89d8-83bb-2538-3a97-3da5fc17effd"
                        style="transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;"
                        class="sidebar-product-sticky" bis_skin_checked="1">
                        <div class="purchase-product-wrapper" bis_skin_checked="1">
                            <div class="title purchase-product" bis_skin_checked="1">Информация о продукте</div>
                            <p class="paragraph purchase-product">{{ product.description|slice:":100" }}...</p>
                            <div bis_skin_checked="1">
                                <form 
                                    data-loading-text="Adding to cart..."
                                    data-commerce-product-id="5f848547edc99e2dca576cb5"
                                    method="post" action="{% url 'update_cart' %}"
                                    class="w-commerce-commerceaddtocartform">

                                    {% csrf_token %}
                                    <input type="hidden" name="product_id" value="{{ product.id }}"/>
                                    
                                    <div class="top-content purchase-product-option-content" bis_skin_checked="1"><label
                                            class="purchase-product-label">Цена:</label>
                                        <div data-wf-sku-bindings="%5B%7B%22from%22%3A%22f_price_%22%2C%22to%22%3A%22innerHTML%22%7D%5D"
                                            class="purchase-product-price" bis_skin_checked="1">&nbsp;{{product.price}}&nbsp;руб
                                        </div>
                                    </div>

                                        
                                    </div>
                                    {% if cart|length == 0 %}
                                        <input type="submit" data-node-type="commerce-add-to-cart-button"
                                        data-loading-text="Adding to cart..." value="Добавить в корзину" aria-busy="false"
                                        style="background-color: rgb(191, 255, 113) !important; color: black;"
                                        aria-haspopup="dialog"
                                        class="w-commerce-commerceaddtocartbutton button-primary add-to-cart"><a
                                        data-node-type="commerce-buy-now-button" data-default-text="Buy now"
                                        data-subscription-text="Subscribe now" aria-busy="false" aria-haspopup="false"
                                        class="w-commerce-commercebuynowbutton button-secondary buy-now w-dyn-hide"
                                        href="/checkout">
                                    {% else %}
                                    <input type="submit" data-node-type="commerce-add-to-cart-button"
                                    data-loading-text="Adding to cart..." value="Удалить из корзины" aria-busy="false"
                                    aria-haspopup="dialog"
                                    class="w-commerce-commerceaddtocartbutton button-primary add-to-cart"><a
                                    data-node-type="commerce-buy-now-button" data-default-text="Buy now"
                                    data-subscription-text="Subscribe now" aria-busy="false" aria-haspopup="false"
                                    class="w-commerce-commercebuynowbutton button-secondary buy-now w-dyn-hide"
                                    href="/checkout">
                                    {% endif %}
                                        
                                        Buy now</a>
                                        {% if user.is_superuser %}
                                        <div class="product__variant--list mb-15" style="margin: 10px 0 0 0;">
                                            <a class="w-commerce-commerceaddtocartbutton button-primary add-to-cart" 
                                            style="background-color: rgb(248, 50, 50) !important;"
                                            type="submit">Удалить
                                                товар</a>
                                        </div>
                                        <div class="product__variant--list mb-15" style="margin: 10px 0 0 0;">
                                            <a href="{% url 'product_update' product.slug %}"
                                            style="background-color: rgb(66, 128, 0) !important;"
                                            class="w-commerce-commerceaddtocartbutton button-primary add-to-cart">Обновить товар</a>
                                        </div>
                                        {% endif %}
                                </form>
                                <div style="display:none" class="w-commerce-commerceaddtocartoutofstock"
                                    bis_skin_checked="1">
                                    <div bis_skin_checked="1">This product is out of stock.</div>
                                </div>
                                <div data-node-type="commerce-add-to-cart-error" style="display:none"
                                    class="w-commerce-commerceaddtocarterror" bis_skin_checked="1">
                                    <div data-node-type="commerce-add-to-cart-error"
                                        data-w-add-to-cart-quantity-error="Product is not available in this quantity."
                                        data-w-add-to-cart-general-error="Something went wrong when adding this item to the cart."
                                        data-w-add-to-cart-mixed-cart-error="You can’t purchase another product with a subscription."
                                        data-w-add-to-cart-buy-now-error="Something went wrong when trying to purchase this item."
                                        data-w-add-to-cart-checkout-disabled-error="Checkout is disabled on this site."
                                        data-w-add-to-cart-select-all-options-error="Please select an option in each set."
                                        bis_skin_checked="1">Product is not available in this quantity.</div>
                                </div>
                            </div>
                        </div>
                        <div data-w-id="17c08c01-39fb-da5b-56e6-257da3c8a07a"
                            style="transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;"
                            class="product-specs" bis_skin_checked="1">
                            <h3 class="title product-specs-title">Характеристики</h3>
                            <div class="product-specs-wrapper" bis_skin_checked="1">
                                <div class="product-specs-content-wrapper" bis_skin_checked="1">
                                    <div bis_skin_checked="1">{{ product.specs|slice:":100" }}...</div>
                                </div>
                            </div>
                        </div>
                        <div data-w-id="0f176af9-9ba9-827d-b8de-3819eaf82cd6"
                            style="transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg); opacity: 1; transform-style: preserve-3d;"
                            class="about-the-author-wrapper" bis_skin_checked="1">
                            <h3 class="title about-the-author">О категории</h3><a
                                data-w-id="39f6e743-9183-2a50-72a1-a983ad385299" href="/author/john-carter"
                                class="about-the-author w-inline-block">
                                <div class="top-content about-the-author-top-content" bis_skin_checked="1">
                                    <div class="about-the-author-left-wrapper" bis_skin_checked="1">
                                        <div class="about-author-top-content" bis_skin_checked="1">
                                            <div class="about-the-author-name-wrapper" bis_skin_checked="1">
                                                <div class="about-the-author-name" bis_skin_checked="1">{{current_category.title}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <p class="paragraph about-the-author-paragraph">{{current_category.description|slice:":100"}}.</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>
<!-- Quickview Wrapper End -->
{% include 'include/footer.html' %}
<!-- Scroll top bar -->
<button id="scroll__top"><svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512">
        <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48"
            d="M112 244l144-144 144 144M256 120v292" />
    </svg></button>

{% endblock %}